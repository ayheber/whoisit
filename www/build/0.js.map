{"version":3,"sources":["../../src/pages/game/game.module.ts","../../src/pages/game/game.ts","../../node_modules/rxjs/add/operator/map.js"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { GamePage } from './game';\n\n@NgModule({\n  declarations: [\n    GamePage,\n  ],\n  imports: [\n    IonicPageModule.forChild(GamePage),\n  ],\n})\nexport class GamePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game/game.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { RoomModel } from '../../Models/room.model';\nimport { CardModel } from '../../Models/card.model';\nimport { AuthService } from '../../services/auth.service';\nimport 'rxjs/add/operator/map';\n\n/**\n * Generated class for the GamePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-game',\n  templateUrl: 'game.html',\n})\nexport class GamePage {\n  roomKey: string;\n  roomModel: RoomModel;\n  titleGame: string;\n  photoImage: string;\n  photoTitle: string;\n  cardList: CardModel[];\n  isGameStarted: string;\n  selectorUser: string;\n  imageKey: string;\n  isSpy: Boolean;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,  public af: AngularFireDatabase,\n              private authService: AuthService) {\n\n      this.roomKey = this.navParams.get('roomKey');\n      this.selectorUser = this.navParams.get('selectorUser');\n      this.af.object(`rooms/${this.roomKey}/categoryName`).subscribe(\n        t=> {\n          this.titleGame = t.$value;\n        }\n      )\n     \n      this.drawCard();\n      \n  }\n\n  private drawCard() {\n     this.af.object(`rooms/${this.roomKey}/spy`).subscribe( spy => {\n        if(spy.$value == this.authService.currentUser.$key) {\n            this.drawSpy();\n        }\n        else {\n          console.log(\"enter to random card\");\n            this.drawRandomCard();\n        }\n    });\n  }\n\n  private drawRandomCard() {\n      this.af.list('/categories', { preserveSnapshot: true}).subscribe(snapshots=>{\n          snapshots.forEach(snapshot => {\n              if(snapshot.val().category == this.titleGame) {\n                if(!snapshot.val().isTaken) {\n                  this.photoImage = snapshot.val().link;\n                  this.photoTitle = snapshot.val().title;\n                  // Take the key of the image so we can sign it as taken\n                  this.imageKey = snapshot.key;\n                  return;\n                }\n              }\n          });\n      });\n\n      // set the image as taken\n      this.af.object(`/categories/${this.imageKey}/isTaken`).set(true);\n  }\n  \n  private drawSpy() {\n \n    this.photoImage = \"assets/spy.png\";\n    this.photoTitle = \"Spy\";\n    this.isSpy = true;\n  }\n\n  LeaveGame() {\n    //this.af.object(`categories/${this.imageKey}/isTaken`).set(false);\n    this.navCtrl.push('EndGamePage', {\n      roomKey: this.roomKey\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game/game.ts","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar map_1 = require('../../operator/map');\nObservable_1.Observable.prototype.map = map_1.map;\n//# sourceMappingURL=map.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/add/operator/map.js\n// module id = 455\n// module chunks = 0"],"sourceRoot":""}