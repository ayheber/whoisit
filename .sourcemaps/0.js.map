{"version":3,"sources":["../../src/pages/game/game.module.ts","../../src/pages/game/game.ts","../../node_modules/rxjs/add/operator/map.js"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { GamePage } from './game';\n// import { ComponentsModule } from '../../components/components.module'\n\n@NgModule({\n  declarations: [\n    GamePage,\n    \n  ],\n  imports: [\n    IonicPageModule.forChild(GamePage),\n    // ComponentsModule\n  ],\n\n})\nexport class GamePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game/game.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { RoomModel } from '../../Models/room.model';\nimport { CardModel } from '../../Models/card.model';\nimport { AuthService } from '../../services/auth.service';\nimport { RoomsService } from '../../services/rooms.service';\nimport { Observable } from 'rxjs/Observable';\nimport { RoundModel} from '../../Models/round.model';\nimport {CategoryModel } from '../../Models/category.model';\nimport 'rxjs/add/operator/map';\n\n/**\n * Generated class for the GamePage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-game',\n  templateUrl: 'game.html',\n})\nexport class GamePage {\n  roomKey: string;\n  titleGame: string;\n  photoImage: string;\n  photoTitle: string;\n  isSpy: Boolean;\n  roundKey: string;\n  category: CategoryModel\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,  public af: AngularFireDatabase,\n              private authService: AuthService, private roomsService: RoomsService) {\n      \n      this.roomKey = this.navParams.get('roomKey');\n      console.log(\"1\");\n      let subscription = this.af.list(`rounds/`).subscribe(round=> {\n          round.forEach( r => {\n              if(r.roomKey == this.roomKey) {\n                this.roundKey = r.$key;\n                console.log(\"2\");\n                    this.af.object(`/rounds/${this.roundKey}/categoryName`).subscribe(\n                        t=> {\n                          console.log(\"3\");\n                            this.af.object(`categories/${t.$value}/`).subscribe(cat=> {\n                              console.log(\"ctor game \" + t.$value);\n                              this.category = cat;\n                              subscription.unsubscribe();\n                              this.drawCard();\n                            });\n                            \n                    }\n                  )\n      \n        \n              }\n          });\n      });\n\n     \n  }\n\n  private drawCard() {\n      if(this.roomsService.getSpy() == this.authService.currentUser.$key) {\n            this.drawSpy();\n      }\n      else {\n          this.drawRandomCard();\n      }\n  }\n\n  private drawRandomCard() {\n  \n      this.titleGame = this.category.title;\n      this.af.object(`rounds/${this.roundKey}/secret`).subscribe( t=> {\n        this.photoImage = 'assets/' + this.titleGame + \"/\" + t.$value + \".png\"; \n      });\n\n      \n\n      // set the image as taken\n      //this.af.object(`/categories/${this.imageKey}/isTaken`).set(true);\n  }\n  \n  private drawSpy() {\n \n    this.photoImage = \"assets/spy2.png\";\n    this.photoTitle = \"Spy\";\n    this.titleGame = this.category.title;\n    this.isSpy = true;\n  }\n\n  LeaveGame() {\n     \n      this.navCtrl.push('EndGamePage', {\n      roomKey: this.roomKey,\n      roundKey: this.roundKey\n\n    });\n    //this.af.object(`categories/${this.imageKey}/isTaken`).set(false);\n    \n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game/game.ts","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar map_1 = require('../../operator/map');\nObservable_1.Observable.prototype.map = map_1.map;\n//# sourceMappingURL=map.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/add/operator/map.js\n// module id = 462\n// module chunks = 0"],"sourceRoot":""}