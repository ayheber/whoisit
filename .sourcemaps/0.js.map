{"version":3,"sources":["../../src/pages/game/game.module.ts","../../src/pages/game/game.ts","../../node_modules/rxjs/add/operator/map.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAAyC;AACO;AACd;AAClC,wEAAwE;AAaxE,IAAa,cAAc;IAA3B;IAA6B,CAAC;IAAD,qBAAC;AAAD,CAAC;AAAjB,cAAc;IAX1B,uEAAQ,CAAC;QACR,YAAY,EAAE;YACZ,uDAAQ;SAET;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,uDAAQ,CAAC;SAEnC;KAEF,CAAC;GACW,cAAc,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;AChBe;AAC0B;AACR;AACF;AACE;AAE7B;AAO/B,IAAa,QAAQ;IAQnB,kBAAmB,OAAsB,EAAS,SAAoB,EAAU,EAAuB,EACnF,WAAwB,EAAU,YAA0B;QADhF,iBAkBC;QAlBkB,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAU,OAAE,GAAF,EAAE,CAAqB;QACnF,gBAAW,GAAX,WAAW,CAAa;QAAU,iBAAY,GAAZ,YAAY,CAAc;QAE9E,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;QAE/C,IAAI,YAAY,GAAE,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,YAAU,YAAY,CAAC,WAAW,CAAC,IAAI,SAAI,IAAI,CAAC,QAAU,CAAC,CAAC,SAAS,CAAE,eAAK;YAC3G,EAAE,EAAC,KAAK,CAAC,MAAM,IAAI,KAAI,CAAC,WAAW,CAAC,WAAW,CAAC,IAAI,CAAC,EAAC;gBACpD,KAAI,CAAC,OAAO,EAAE,CAAC;gBACf,YAAY,CAAC,WAAW,EAAE,CAAC;YAC7B,CAAC;YACD,IAAI,CAAC,CAAC;gBACJ,KAAI,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,CAAC,WAAW,CAAC,CAAC;gBACrD,YAAY,CAAC,WAAW,EAAE,CAAC;YAC7B,CAAC;YAED,iDAAiD;YACjD,KAAI,CAAC,YAAY,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QACzC,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,iCAAc,GAAtB,UAAuB,OAAe,EAAE,WAAmB;QAA3D,iBAOC;QANC,IAAI,CAAC,EAAE,CAAC,MAAM,CAAC,gBAAc,WAAW,MAAG,CAAC,CAAC,SAAS,CAAE,kBAAQ;YAC9D,IAAI,QAAQ,GAAkB,QAAQ,CAAC;YACvC,KAAI,CAAC,aAAa,GAAG,QAAQ,CAAC,KAAK,CAAC;YACpC,KAAI,CAAC,UAAU,GAAG,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,GAAG,CAAC;YAChD,KAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC;QACtD,CAAC,CAAC,CAAC;IACL,CAAC;IAEO,0BAAO,GAAf;QACE,IAAI,CAAC,UAAU,GAAG,iBAAiB,CAAC;QACpC,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;IACpB,CAAC;IAEM,4BAAS,GAAhB;QACI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,aAAa,EAAE;YACjC,QAAQ,EAAE,IAAI,CAAC,QAAQ;SACxB,CAAC,CAAC;IACL,CAAC;IACH,eAAC;AAAD,CAAC;AAhDY,QAAQ;IALpB,wEAAS,EAAE;IACX,wEAAS,CAAC;QACT,QAAQ,EAAE,WAAW;OACG;KACzB,CAAC;oKASuG;QACtE,KAA+C;AAuCjF;SAhDY,QAAQ,e;;;;;;;;ACbrB;AACA;AACA;AACA;AACA,+B","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { GamePage } from './game';\n// import { ComponentsModule } from '../../components/components.module'\n\n@NgModule({\n  declarations: [\n    GamePage,\n    \n  ],\n  imports: [\n    IonicPageModule.forChild(GamePage),\n    // ComponentsModule\n  ],\n\n})\nexport class GamePageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game/game.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { AngularFireDatabase } from 'angularfire2/database';\nimport { AuthService } from '../../services/auth.service';\nimport { RoomsService } from '../../services/rooms.service';\nimport {CategoryModel } from '../../Models/category.model';\nimport 'rxjs/add/operator/map';\n\n@IonicPage()\n@Component({\n  selector: 'page-game',\n  templateUrl: 'game.html',\n})\nexport class GamePage {\n  roomKey: string;\n  photoImage: string;\n  subjectTitle: string;\n  categoryTitle: string;\n  isSpy: Boolean;\n  roundKey: string;\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,  public af: AngularFireDatabase,\n              private authService: AuthService, private roomsService: RoomsService) {\n\n    this.roundKey = this.navParams.get('roundKey');\n    \n    let subscription =this.af.object(`rounds/${roomsService.currentRoom.$key}/${this.roundKey}`).subscribe( round => {\n      if(round.spyKey == this.authService.currentUser.$key){\n        this.drawSpy();\n        subscription.unsubscribe();\n      }\n      else {\n        this.drawRandomCard(round.secret, round.categoryKey);\n        subscription.unsubscribe();\n      }\n\n      // set the spy so we could know him in the future\n      this.roomsService.setSpy(round.spyKey);\n    });\n  }\n\n  private drawRandomCard(subject: number, categoryKey: string) {\n    this.af.object(`categories/${categoryKey}/`).subscribe( category =>{\n      let catModel: CategoryModel = category;\n      this.categoryTitle = catModel.title;\n      this.photoImage = catModel.members[subject].url; \n      this.subjectTitle = catModel.members[subject].title; \n    });\n  }\n  \n  private drawSpy() {\n    this.photoImage = \"assets/spy2.png\";\n    this.subjectTitle = \"Spy\";\n    this.isSpy = true;\n  }\n\n  public LeaveGame() {\n      this.navCtrl.push('EndGamePage', {\n      roundKey: this.roundKey\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/game/game.ts","\"use strict\";\nvar Observable_1 = require('../../Observable');\nvar map_1 = require('../../operator/map');\nObservable_1.Observable.prototype.map = map_1.map;\n//# sourceMappingURL=map.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/rxjs/add/operator/map.js\n// module id = 462\n// module chunks = 0"],"sourceRoot":""}